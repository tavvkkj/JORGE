<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>S.A.F.E.</title> <link rel="stylesheet" href="src/style.css">
    <link href="https://fonts.googleapis.com/" rel="preconnect">
    <link crossorigin="" href="https://fonts.gstatic.com/" rel="preconnect">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <img alt="Perfil" class="profile-image" src="profile.png"> <h1>S.A.F.E.</h1> <form id="Enviar">
            <div class="form-group">
                <label for="profile">Profile:</label>
                <div class="profile-wrapper" style="display: flex; gap: 10px; align-items: center;">
                    <select id="profile" style="flex: 1; padding: 10px; border-radius: 12px; background-color: #1f1f1f; color: white; border: none;">
                        <option value="" disabled="" selected="">Select a profile</option>
                    </select>
                    <button id="saveProfile" style="
                        background-color: transparent;
                        border: 1px solid rgba(255, 255, 255, 0.3);
                        padding: 10px 16px;
                        border-radius: 12px;
                        color: white;
                        font-weight: bold;
                        cursor: pointer;
                        font-size: 14px;
                        line-height: 1;
                        transition: all 0.25s ease;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                    " type="button">ADD</button>
                    <button id="deleteProfile" style="
                        background-color: transparent;
                        border: 1px solid rgba(255, 0, 0, 0.4);
                        padding: 10px 12px;
                        border-radius: 12px;
                        color: #ff6666;
                        font-weight: bold;
                        cursor: pointer;
                        font-size: 14px;
                        transition: all 0.25s ease;
                    " type="button">DEL</button>
                </div>
            </div>

            <div class="form-group">
                <label for="ra">Academic Registry (RA):</label>
                <input id="ra" placeholder="Enter your RA" required="" type="text">
            </div>
            <div class="form-group" style="position: relative;">
                <label for="senha">Password:</label>
                <div class="password-wrapper" style="position: relative; display: flex; align-items: center;">
                    <input id="senha" placeholder="Enter your password" required="" type="password">
                    <span class="toggle-eye" id="VerSenha">
                        <svg fill="none" height="20" stroke="white" stroke-width="2" viewBox="0 0 24 24" width="20" xmlns="http://www.w3.org/2000/svg">
                            <path d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" stroke-linecap="round" stroke-linejoin="round"></path>
                            <path d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" stroke-linecap="round" stroke-linejoin="round"></path>
                        </svg>
                    </span>
                </div>
            </div>
            <div class="form-group time-container">
                <div class="time-inputs">
                    <div class="form-group">
                        <label for="tempoMin">Min:</label>
                        <select id="tempoMin" required="">
                            <option selected="" value="1">01 Minute</option>
                            <option value="2">02 Minutes</option>
                            <option value="3">03 Minutes</option>
                            <option value="4">04 Minutes</option>
                            <option value="5">05 Minutes</option>
                            <option value="6">06 Minutes</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="tempoMax">Max:</label>
                        <select id="tempoMax" required="">
                            <option value="1">01 Minute</option>
                            <option selected="" value="2">02 Minutes</option>
                            <option value="3">03 Minutes</option>
                            <option value="4">04 Minutes</option>
                            <option value="5">05 Minutes</option>
                            <option value="6">06 Minutes</option>
                        </select>
                    </div>
                </div>
                <button id="Logar" class="main-action-btn" type="submit">START TASKS</button>
            </div>
            <div class="form-group">
                <button id="Corrigir" class="main-action-btn" type="submit">CORRECT TASKS</button>
            </div>
            <div class="form-group">
                <button id="prova" class="main-action-btn" type="submit">SEND PAULISTA EXAM</button>
            </div>
            <div class="form-group">
                <button id="openScheduler" class="configure-scheduler-btn" type="button">⚙️ Configure Auto Scheduler</button>
            </div>
        </form>

        <div class="modal" id="progressModal" style="display: none;">
            <div class="modal-content">
                <div class="loader">
                    <div class="spinner"></div>
                </div>
                <h2 id="modalTitle">Carregando Tarefas</h2>
                <div class="task-info">
                    <p>Current step: <span id="currentStatus">Buscando tarefas...</span></p>
                    <p id="foundTasksRow">Tarefas encontradas: <span id="totalTasksFound">0</span></p>
                    <p id="timeRow" style="display: none;"><strong>Tempo restante:</strong> <span class="time-remaining" id="timeRemaining">0:00</span></p>
                </div>
                <div class="progress-container">
                    <div class="progress-bar">
                        <div class="progress" id="progressBar" style="width: 0%;"></div>
                    </div>
                </div>
                <button class="close-modal" id="closeModal">Cancel</button>
            </div>
        </div>

        <div class="modal" id="taskSelectorModal" style="display: none;">
            <div class="modal-content" style="max-width: 500px; padding: 0; overflow: hidden;">
                <div style="padding: 24px;">
                    <h2 style="text-align: center; margin-bottom: 20px;">Select Tasks</h2>
                    <div id="taskSelectorList" style="max-height: 300px; overflow-y: auto; margin-bottom: 20px;"></div>
                </div>
                <div style="padding: 16px; border-top: 1px solid #333; background: #121212; display: flex; flex-direction: column; gap: 10px;">
                    <button class="scheduler-btn" id="startSelectedTasks">Start Selected Tasks</button>
                    <button class="scheduler-btn" id="startAllTasks">Start All Tasks</button>
                </div>
            </div>
        </div>

        <div class="modal" id="schedulerModal" style="display: none;">
            <div class="modal-content">
                <h2 style="text-align: center; margin-bottom: 20px;">Configure Auto Scheduler</h2>
                <div class="form-group">
                    <label for="autoScheduleTime">Schedule Time:</label>
                    <input type="time" id="autoScheduleTime" required>
                </div>
                <div class="form-group">
                    <label for="autoScheduleProfile">Select Profile:</label>
                    <select id="autoScheduleProfile" required>
                        </select>
                </div>
                <div class="form-group">
                    <label for="autoScheduleType">Task Type:</label>
                    <select id="autoScheduleType" required>
                        <option value="all">All Tasks</option>
                        <option value="pending">Pending Only</option>
                        <option value="corrected">Corrected Tasks</option>
                        <option value="exam">Exams</option>
                    </select>
                </div>
                <div class="form-group time-inputs">
                    <div class="form-group">
                        <label for="autoScheduleMin">Min Time:</label>
                        <select id="autoScheduleMin" required>
                            <option value="1">1 Minute</option>
                            <option value="2">2 Minutes</option>
                            <option value="3">3 Minutes</option>
                            <option value="4">4 Minutes</option>
                            <option value="5">5 Minutes</option>
                            <option value="6">6 Minutes</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="autoScheduleMax">Max Time:</label>
                        <select id="autoScheduleMax" required>
                            <option value="1">1 Minute</option>
                            <option value="2">2 Minutes</option>
                            <option value="3">3 Minutes</option>
                            <option value="4">4 Minutes</option>
                            <option value="5">5 Minutes</option>
                            <option value="6">6 Minutes</option>
                        </select>
                    </div>
                </div>
                <div id="schedulePreview" style="margin-top: 15px; font-size: 13px; color: #ccc; text-align: left;"></div>
                <button id="saveSchedule" style="background-color: #4CAF50; margin-top: 20px;">Save Schedule</button>
                <button id="clearSchedule" class="close-modal" style="background-color: #d32f2f; margin-top: 10px;">Clear Schedule</button>
                <button class="close-modal" style="background-color: #555; margin-top: 10px;">Close</button>
            </div>
        </div>

    </div>

    <div style="
      position: fixed;
      bottom: 20px;
      width: 100%;
      text-align: center;
      font-size: 14px;
      pointer-events: auto;
      z-index: 9999;
    ">
        <a class="footer-credit" href="https://www.tiktok.com/@tavvkkj" style="text-decoration: none; color: #888;" target="_blank">
            Made by @tavvkkj
        </a>
    </div>

    <button id="taskHistoryBtn" style="
        position: fixed;
        top: 20px;
        right: 20px;
        background-color: transparent;
        border: 1px solid #888;
        color: #ccc;
        padding: 6px 12px;
        font-size: 13px;
        border-radius: 8px;
        cursor: pointer;
        z-index: 10000;
        transition: all 0.3s ease;
    ">History</button>
    <div id="taskHistoryPanel" style="
        display: none;
        position: fixed;
        top: 60px;
        right: 20px;
        background: #1f1f1f;
        color: #fff;
        border: 1px solid #444;
        padding: 15px;
        max-height: 300px;
        overflow-y: auto;
        width: 280px;
        z-index: 9999;
        border-radius: 10px;
        font-size: 14px;
        box-shadow: 0 0 10px #000;
    ">
        <h3 style="margin-top: 0; margin-bottom: 10px; text-align:center;">Completed Tasks</h3>
        <ul id="taskHistoryList" style="list-style: none; padding-left: 0; margin: 0;"></ul>
    </div>


    <script src="src/script.js"></script>
    <script src="src/modal.js"></script>
</body>
</html>